Build Biopython in 22 easy steps!!

These instructions are for a Unix machine, with a Windows machine also needed to test and prepare the Windows installers.

1. make sure I have the latest code
    drevil:~biopython> cvs update -P -d 

2. bump version numbers:
* Biopython version - edit  Bio/__init__.py
* Biopython Tutorial - update the date/version line in the Doc/Tutorial.tex file
* Make sure to commit the modified files to CVS.

3. make sure the README file is still up to date

4. add any important info to NEWS or DEPRECATED - you can get a log of recent CVS changes like this (adjust the date accordingly):
    > cvs log -b -N -S -d'>2009-04-20'

5. make sure CONTRIB still current

6. make sure setup.py is still up to date
* Are there any new modules which should get installed?
* You don't need to update version in setup.py itself (this is now done in Bio/__init__.py as described above)

7. do last check to make sure things are checked in
    > rm -r build
    > rm Tests/*.pyc
    > make clean -C Doc
    > cvs update -P -d 

8. build Biopython and do last regression test
    drevil:~biopython> python setup.py build 
    drevil:~biopython> python setup.py test

Ideally do this with a clean checkout on your Windows machine too.  Assuming you have setup your compilers etc appropriately just do this:

    C:\python24\python setup.py build
    C:\python24\python setup.py test

    C:\python25\python setup.py build
    C:\python25\python setup.py test

    C:\python26\python setup.py build
    C:\python26\python setup.py test

Running the tests simultaneously is risky, as two threads may both try and read/write to the same temp files.

9. check out clean version somewhere else
    drevil:~tmp1/> cvs -d :ext:jchang@pub.open-bio.org:/home/repository/biopython checkout biopython 

10. make documentation PDF, text and HTML files in Doc
    drevil:~biopython/Doc> make
    drevil:~biopython/Doc> make clean

11. make MANIFEST. First, make sure MANIFEST.in up to date.
    > python setup.py sdist --manifest-only 

12. make sure the regression tests run here (anything with C code won't work of course, as we haven't compiled it).
    drevil:~tmp1/biopython/Tests/> python run_tests.py

13. make the source distribution
    drevil:~tmp1/biopython> python setup.py sdist --formats=gztar,zip 

14. untar the file somewhere else
    drevil:~tmp2> tar -xzvf ../tmp1/biopython/dist/biopython-1.00a1.tar.gz
* Check to make sure it includes the HTML and PDF files under Doc

15. make sure I can build and test it
    drevil:~tmp2/biopython-1.00a1/> python setup.py build
    drevil:~tmp2/biopython-1.00a1/> python setup.py test
    drevil:~tmp2/biopython-1.00a1/> python setup.py install --root . 

16. add CVS tag
    drevil:~biopython> cvs tag biopython-100a1 

17. Update API documentation using Epydoc.
* Go to the /usr/local/lib/python2.4/site-packages (or equivalent) directory. Running epydoc in your CVS tree works, but can miss some packages due to import errors.
    epydoc -o ~/api -u http://biopython.org -n Biopython --docformat plaintext Bio BioSQL
* Move the generated ~/api directory to replace /home/websites/biopython.org/html/static/DIST/docs/api/ on biopython.org (aka portal.open-bio.org).

18. On your windows machine, build the Windows installers (either from a clean CVS checkout, or the an unzipped copy of the source code bundle made earlier).  Build the installers first, if you do a build/test/install before hand you seem to get a bloated setup exe.  Assuming you have setup your compilers etc appropriately just do this:

    C:\python23\python setup.py bdist_wininst
    C:\python24\python setup.py bdist_wininst
    C:\python25\python setup.py bdist_wininst
    C:\python26\python setup.py bdist_wininst

19. Remove any prior Biopython installations on your windows machine, and confirm the Windows installers work.

20. scp or ftp the .tar.gz, .zip and Windows installer files to the Biopython website, folder /home/websites/biopython.org/html/static/DIST/ on biopython.org (aka portal.open-bio.org).

21. Upload to the python package index:

    > python setup.py register sdist upload

You need to have a login on pypi and be registered with Biopython to be able to upload the new version.

22. Update the [[website]] and announce the release:
* add to [[Main_Page|main page]] and [[Download|downloads page]] (through the wiki), make sure the links work
* post the announcement on [http://news.open-bio.org news.open-bio.org] (which will update the [[News|news page]] and [http://twitter.com/Biopython twitter] via the news feed)
* add the new version to [http://bugzilla.open-bio.org/ Bugzilla]
* send email to biopython@biopython.org and biopython-announce@biopython.org (see [[Mailing_lists|mailing lists]])